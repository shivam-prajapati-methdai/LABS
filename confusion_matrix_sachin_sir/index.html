<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Confusion Matrix Lab</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Interactive Confusion Matrix Lab</h1>
            <p class="header-subtitle">Explore how classification thresholds affect diagnostic performance</p>
        </header>

        <!-- Introduction -->
        <section class="intro-section card">
            <div class="card__body">
                <h2>Medical Diagnosis Scenario</h2>
                <p>In this interactive lab, you'll explore how different classification thresholds affect the performance of a medical diagnostic model. The model is designed to predict whether a patient has a disease based on various symptoms and test results.</p>
                <p>Use the threshold slider below to see how changing the decision boundary affects the number of:</p>
                <ul>
                    <li><strong>True Positives (TP):</strong> Correctly identified sick patients</li>
                    <li><strong>False Positives (FP):</strong> Healthy patients incorrectly identified as sick</li>
                    <li><strong>True Negatives (TN):</strong> Correctly identified healthy patients</li>
                    <li><strong>False Negatives (FN):</strong> Sick patients incorrectly identified as healthy</li>
                </ul>
            </div>
        </section>

        <!-- Controls -->
        <section class="controls-section card">
            <div class="card__body">
                <div class="threshold-control">
                    <label for="threshold-slider" class="form-label">
                        Classification Threshold: <span id="threshold-value">0.25</span>
                    </label>
                    <input type="range" id="threshold-slider" class="threshold-slider" 
                           min="0.05" max="0.90" step="0.05" value="0.25">
                    <div class="threshold-labels">
                        <span>0.05</span>
                        <span>More Sensitive</span>
                        <span>More Specific</span>
                        <span>0.90</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content Grid -->
        <div class="content-grid">
            <!-- Confusion Matrix -->
            <section class="matrix-section card">
                <div class="card__body">
                    <h3>Confusion Matrix</h3>
                    <p class="matrix-description">The confusion matrix shows how the model's predictions compare to actual diagnoses:</p>
                    
                    <div class="confusion-matrix">
                        <div class="matrix-labels">
                            <div class="actual-label">
                                <span class="label-text">Actual</span>
                            </div>
                            <div class="predicted-label">
                                <span class="label-text">Predicted</span>
                            </div>
                        </div>
                        
                        <div class="matrix-grid">
                            <div class="matrix-headers">
                                <div class="header-corner"></div>
                                <div class="header-item">Disease</div>
                                <div class="header-item">Healthy</div>
                            </div>
                            
                            <div class="matrix-row">
                                <div class="row-label">Disease</div>
                                <div class="matrix-cell tp-cell" title="True Positives: Correctly identified sick patients">
                                    <div class="cell-label">TP</div>
                                    <div class="cell-value" id="tp-value" contenteditable="true">18</div>
                                </div>
                                <div class="matrix-cell fn-cell" title="False Negatives: Sick patients missed by the model">
                                    <div class="cell-label">FN</div>
                                    <div class="cell-value" id="fn-value" contenteditable="true">30</div>
                                </div>
                            </div>
                            
                            <div class="matrix-row">
                                <div class="row-label">Healthy</div>
                                <div class="matrix-cell fp-cell" title="False Positives: Healthy patients incorrectly flagged as sick">
                                    <div class="cell-label">FP</div>
                                    <div class="cell-value" id="fp-value" contenteditable="true">27</div>
                                </div>
                                <div class="matrix-cell tn-cell" title="True Negatives: Correctly identified healthy patients">
                                    <div class="cell-label">TN</div>
                                    <div class="cell-value" id="tn-value" contenteditable="true">225</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Metrics Panel -->
            <section class="metrics-section card">
                <div class="card__body">
                    <h3>Performance Metrics</h3>
                    
                    <div class="metrics-grid">
                        <div class="metric-item" data-metric="accuracy">
                            <div class="metric-label">Accuracy</div>
                            <div class="metric-value" id="accuracy-value">81.0%</div>
                            <div class="metric-description">Overall correctness of predictions</div>
                        </div>
                        
                        <div class="metric-item" data-metric="precision">
                            <div class="metric-label">Precision</div>
                            <div class="metric-value" id="precision-value">40.0%</div>
                            <div class="metric-description">Of predicted diseases, how many were correct</div>
                        </div>
                        
                        <div class="metric-item" data-metric="recall">
                            <div class="metric-label">Recall (Sensitivity)</div>
                            <div class="metric-value" id="recall-value">37.5%</div>
                            <div class="metric-description">Of actual diseases, how many were detected</div>
                        </div>
                        
                        <div class="metric-item" data-metric="f1">
                            <div class="metric-label">F1-Score</div>
                            <div class="metric-value" id="f1-value">38.7%</div>
                            <div class="metric-description">Harmonic mean of precision and recall</div>
                        </div>
                        
                        <div class="metric-item" data-metric="fpr">
                            <div class="metric-label">False Positive Rate</div>
                            <div class="metric-value" id="fpr-value">10.7%</div>
                            <div class="metric-description">Healthy patients incorrectly flagged</div>
                        </div>
                        
                        <div class="metric-item" data-metric="fnr">
                            <div class="metric-label">False Negative Rate</div>
                            <div class="metric-value" id="fnr-value">62.5%</div>
                            <div class="metric-description">Sick patients missed by the model</div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Educational Content -->
        <section class="education-section card">
            <div class="card__body">
                <h3>Understanding the Trade-offs</h3>
                <div class="tradeoff-content">
                    <div class="tradeoff-item">
                        <h4>Lower Threshold (More Sensitive)</h4>
                        <p>A lower threshold makes the model more likely to predict "Disease". This increases:</p>
                        <ul>
                            <li><span class="positive">✓ True Positives</span> - Catches more actual diseases</li>
                            <li><span class="negative">✗ False Positives</span> - More healthy patients flagged incorrectly</li>
                        </ul>
                        <p><strong>Medical Impact:</strong> Fewer missed diagnoses, but more unnecessary tests and patient anxiety.</p>
                    </div>
                    
                    <div class="tradeoff-item">
                        <h4>Higher Threshold (More Specific)</h4>
                        <p>A higher threshold makes the model more conservative. This increases:</p>
                        <ul>
                            <li><span class="positive">✓ True Negatives</span> - More accurate healthy predictions</li>
                            <li><span class="negative">✗ False Negatives</span> - More diseases go undetected</li>
                        </ul>
                        <p><strong>Medical Impact:</strong> Fewer false alarms, but higher risk of missing serious conditions.</p>
                    </div>
                </div>
                
                <div class="key-insight">
                    <h4>Key Insight</h4>
                    <p>The optimal threshold depends on the medical context. For life-threatening conditions, we might prefer higher sensitivity (lower threshold) to minimize missed diagnoses, even at the cost of more false positives.</p>
                </div>
            </div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>